
####################### forward sim of calculated escape path WATER SWING
# Test
from pomp.example_problems.planepush import *

# data = [5.0,3.033163020833334,-0.0,0.0,-0.040875,0.0,5.022439947525641,3.333501183748318,-0.007479982508547126,5.385587406153931,0.040284099596283096,-1.7951958020513104]
data = [3.0, 4.6, 0.0, 0.0, 2.0, 0,
        3.0, 4.3, 0.0, 0.0, 2.0, 0.0]
gripper_vel = data[-3:]
dynamics_sim = forwardSimulationPlanePush(gui=1)
cage = PlanePush(data, dynamics_sim)
cage.controlSpace()
time.sleep(2.5)

# energy labeler
# CENTRIPETAL FORCE FORMULATION
states = [[5.0, 4.3, 0.0, 0.0, 2.0, 0, 5.0, 4, 0.0], [5.252774457027413, 5.695799504797724, -0.22542793494441057, 0.4825120568788569, 1.179599856070935, -0.46095105565927336, 4.999403516635509, 5.390500080593268, 0.08589435470034495], [5.550555601629799, 6.480640772406174, -0.6417514248562323, 0.8065280868708311, 0.12050617047828663, 0.33377342037386054, 4.923940987102066, 6.575634740583998, -0.08039771998753359], [6.309894153397601, 6.370986235225177, -1.144795449755825, 0.9320758622392388, -0.038477489419401115, -0.5780340234060488, 4.857648324965659, 6.887749797303382, -0.36234853443523374]]
inputs= [[0.8711948279184758, 0.9768933552599381, -0.31746000007488373, -0.2384675152980164], [0.8225621168118246, -0.9858837387894892, -0.008112179101572137, -0.13404441928118935], [0.6208004354606057, -0.12760083636307606, 0.7157058591535492, -0.26669983254476903]]

new_states = states[0]
for i in range(len(inputs)):
    dynamics_sim.reset_states(states[i]+gripper_vel)
    new_states, viapoints = dynamics_sim.run_forward_sim_labeler(inputs[i])
    print('new_states', new_states)

dynamics_sim.finish_sim()

